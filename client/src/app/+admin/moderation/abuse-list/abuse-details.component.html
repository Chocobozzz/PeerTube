<div class="d-flex moderation-expanded">
  <!-- report left part (report details) -->
  <div class="col-8">

    <!-- report metadata -->
    <div class="d-flex">
      <span class="col-3 moderation-expanded-label" i18n>Reporter</span>
      <span class="col-9 moderation-expanded-text">
        <a [routerLink]="[ '/admin/moderation/abuses/list' ]" [queryParams]="{ 'search': 'reporter:&quot;' + abuse.reporterAccount.displayName + '&quot;' }" class="chip">
          <img
            class="avatar"
            [src]="abuse.reporterAccount.avatar?.path"
            (error)="switchToDefaultAvatar($event)"
            alt="Avatar"
          >
          <div>
            <span class="text-muted">{{ abuse.reporterAccount.nameWithHost }}</span>
          </div>
        </a>
        <a [routerLink]="[ '/admin/moderation/abuses/list' ]" [queryParams]="{ 'search': 'reporter:&quot;' + abuse.reporterAccount.displayName + '&quot;' }" class="ml-auto text-muted video-details-links" i18n>
          {abuse.countReportsForReporter, plural, =1 {1 report} other {{{ abuse.countReportsForReporter }} reports}}<span class="ml-1 glyphicon glyphicon-flag"></span>
        </a>
      </span>
    </div>

    <div class="d-flex">
      <span class="col-3 moderation-expanded-label" i18n>Reportee</span>
      <span class="col-9 moderation-expanded-text">
        <a [routerLink]="[ '/admin/moderation/abuses/list' ]" [queryParams]="{ 'search': 'reportee:&quot;' +abuse.video.channel.ownerAccount.displayName + '&quot;' }" class="chip">
          <img
            class="avatar"
            [src]="abuse.video.channel.ownerAccount?.avatar?.path"
            (error)="switchToDefaultAvatar($event)"
            alt="Avatar"
          >
          <div>
            <span class="text-muted">{{ abuse.video.channel.ownerAccount ? abuse.video.channel.ownerAccount.nameWithHost : '' }}</span>
          </div>
        </a>
        <a [routerLink]="[ '/admin/moderation/abuses/list' ]" [queryParams]="{ 'search': 'reportee:&quot;' +abuse.video.channel.ownerAccount.displayName + '&quot;' }" class="ml-auto text-muted video-details-links" i18n>
          {abuse.countReportsForReportee, plural, =1 {1 report} other {{{ abuse.countReportsForReportee }} reports}}<span class="ml-1 glyphicon glyphicon-flag"></span>
        </a>
      </span>
    </div>

    <div class="d-flex" *ngIf="abuse.updatedAt">
      <span class="col-3 moderation-expanded-label" i18n>Updated</span>
      <time class="col-9 moderation-expanded-text video-details-date-updated">{{ abuse.updatedAt | date: 'medium' }}</time>
    </div>

    <!-- report text -->
    <div class="mt-3 d-flex">
      <span class="col-3 moderation-expanded-label">
        <ng-container i18n>Report</ng-container>
        <a [routerLink]="[ '/admin/moderation/abuses/list' ]" [queryParams]="{ 'search': '#' + abuse.id  }" class="ml-1 text-muted">#{{ abuse.id }}</a>
      </span>
      <span class="col-9 moderation-expanded-text" [innerHTML]="abuse.reasonHtml"></span>
    </div>

    <div *ngIf="getPredefinedReasons()" class="mt-2 d-flex">
      <span class="col-3"></span>
      <span class="col-9">
        <a [routerLink]="[ '/admin/moderation/abuses/list' ]" [queryParams]="{ 'search': 'tag:' + reason.id  }" class="chip rectangular bg-secondary text-light" *ngFor="let reason of getPredefinedReasons()">
          <div>{{ reason.label }}</div>
        </a>
      </span>
    </div>

    <div *ngIf="abuse.startAt" class="mt-2 d-flex">
      <span class="col-3 moderation-expanded-label" i18n>Reported part</span>
      <span class="col-9">
        {{ startAt }}<ng-container *ngIf="abuse.endAt"> - {{ endAt }}</ng-container>
      </span>
    </div>

    <div class="mt-3 d-flex" *ngIf="abuse.moderationComment">
      <span class="col-3 moderation-expanded-label" i18n>Note</span>
      <span class="col-9 moderation-expanded-text" [innerHTML]="abuse.moderationCommentHtml"></span>
    </div>

  </div>

  <!-- report right part (video details) -->
  <div class="col-4">
    <div class="screenratio">
      <div *ngIf="abuse.video.deleted || abuse.video.blacklisted">
        <span i18n *ngIf="abuse.video.deleted">The video was deleted</span>
        <span i18n *ngIf="!abuse.video.deleted">The video was blocked</span>
      </div>
      <div *ngIf="!abuse.video.deleted && !abuse.video.blacklisted" [innerHTML]="abuse.embedHtml"></div>
    </div>
  </div>
</div>
