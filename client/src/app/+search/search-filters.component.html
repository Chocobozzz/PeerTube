<form (ngSubmit)="formUpdated()">
  <div class="row">
    <div class="col-lg-4 col-md-6 col-xs-12">
      <fieldset class="form-group" role="radiogroup">
        <div class="radio-label label-container">
          <label for="sort" i18n>Sort</label>

          @if (advancedSearch().sort !== '-match') {
            <button type="button" i18n class="reset-button reset-button-small" (click)="resetField('sort', '-match')">Reset</button>
          }
        </div>

        @for (sort of sorts; track sort) {
          <div class="peertube-radio-container">
            <input type="radio" name="sort" [id]="sort.id" [value]="sort.id" [(ngModel)]="advancedSearch().sort">
            <label [for]="sort.id" class="radio">{{ sort.label }}</label>
          </div>
        }
      </fieldset>

      <div class="form-group" role="radiogroup">
        <div class="radio-label label-container">
          <label for="isLive" i18n>Display only</label>

          @if (advancedSearch().isLive !== undefined) {
            <button type="button" i18n class="reset-button reset-button-small" (click)="resetField('isLive')">Reset</button>
          }
        </div>

        <div class="peertube-radio-container">
          <input type="radio" name="isLive" id="isLiveTrue" value="true" [(ngModel)]="advancedSearch().isLive">
          <label i18n for="isLiveTrue" class="radio">Live videos</label>
        </div>

        <div class="peertube-radio-container">
          <input type="radio" name="isLive" id="isLiveFalse" value="false" [(ngModel)]="advancedSearch().isLive">
          <label i18n for="isLiveFalse" class="radio">VOD videos</label>
        </div>
      </div>

      <div class="form-group">
        <div class="radio-label label-container">
          <label for="publishedDateRange" i18n>Published date</label>

          @if (publishedDateRange !== undefined) {
            <button type="button" i18n class="reset-button reset-button-small" (click)="resetLocalField('publishedDateRange')">Reset</button>
          }
        </div>

        @for (date of publishedDateRanges; track date) {
          <div class="peertube-radio-container">
            <input
              type="radio"
              (change)="onDurationOrPublishedUpdated()"
              name="publishedDateRange"
              [id]="date.id"
              [value]="date.id"
              [(ngModel)]="publishedDateRange"
            >
            <label [for]="date.id" class="radio">{{ date.label }}</label>
          </div>
        }
      </div>

      <div class="form-group">
        <div class="label-container">
          <label i18n for="original-publication-after">Original publication year</label>

          @if (originallyPublishedStartYear || originallyPublishedEndYear) {
            <button type="button" i18n class="reset-button reset-button-small" (click)="resetOriginalPublicationYears()">Reset</button>
          }
        </div>

        <div class="row">
          <div class="ps-0 col-sm-6">
            <input
              (change)="onDurationOrPublishedUpdated()"
              (keydown.enter)="$event.preventDefault()"
              type="text"
              id="original-publication-after"
              name="original-publication-after"
              i18n-placeholder
              placeholder="After..."
              [(ngModel)]="originallyPublishedStartYear"
              class="form-control"
            >
          </div>
          <div class="pe-0 col-sm-6">
            <input
              (change)="onDurationOrPublishedUpdated()"
              (keydown.enter)="$event.preventDefault()"
              type="text"
              id="original-publication-before"
              name="original-publication-before"
              i18n-placeholder
              placeholder="Before..."
              [(ngModel)]="originallyPublishedEndYear"
              class="form-control"
            >
          </div>
        </div>
      </div>
    </div>

    <div class="col-lg-4 col-md-6 col-xs-12">
      <div class="form-group" role="radiogroup">
        <div class="radio-label label-container">
          <label for="durationRange" i18n>Duration</label>

          @if (durationRange !== undefined) {
            <button type="button" i18n class="reset-button reset-button-small" (click)="resetLocalField('durationRange')">Reset</button>
          }
        </div>

        @for (duration of durationRanges; track duration) {
          <div class="peertube-radio-container">
            <input
              type="radio"
              (change)="onDurationOrPublishedUpdated()"
              name="durationRange"
              [id]="duration.id"
              [value]="duration.id"
              [(ngModel)]="durationRange"
            >
            <label [for]="duration.id" class="radio">{{ duration.label }}</label>
          </div>
        }
      </div>

      <div class="form-group">
        <label i18n for="category">Category</label>

        @if (advancedSearch().categoryOneOf !== undefined) {
          <button type="button" i18n class="reset-button reset-button-small" (click)="resetField('categoryOneOf')">Reset</button>
        }

        <div class="peertube-select-container">
          <select id="category" name="category" [(ngModel)]="advancedSearch().categoryOneOf" class="form-control">
            <option [ngValue]="undefined" i18n>Display all categories</option>

            @for (category of videoCategories; track category) {
              <option [value]="category.id">{{ category.label }}</option>
            }
          </select>
        </div>
      </div>

      <div class="form-group">
        <label i18n for="licence">Licence</label>

        @if (advancedSearch().licenceOneOf !== undefined) {
          <button type="button" i18n class="reset-button reset-button-small" (click)="resetField('licenceOneOf')">Reset</button>
        }

        <div class="peertube-select-container">
          <select id="licence" name="licence" [(ngModel)]="advancedSearch().licenceOneOf" class="form-control">
            <option [ngValue]="undefined" i18n>Display all licenses</option>

            @for (licence of videoLicences; track licence) {
              <option [value]="licence.id">{{ licence.label }}</option>
            }
          </select>
        </div>
      </div>

      <div class="form-group">
        <label i18n for="language">Language</label>

        @if (advancedSearch().languageOneOf !== undefined) {
          <button type="button" i18n class="reset-button reset-button-small" (click)="resetField('languageOneOf')">Reset</button>
        }

        <div class="peertube-select-container">
          <select id="language" name="language" [(ngModel)]="advancedSearch().languageOneOf" class="form-control">
            <option [ngValue]="undefined" i18n>Display all languages</option>

            @for (language of videoLanguages; track language) {
              <option [value]="language.id">{{ language.label }}</option>
            }
          </select>
        </div>
      </div>
    </div>

    <div class="col-lg-4 col-md-6 col-xs-12">
      <div class="form-group">
        <label i18n for="tagsAllOf">All of these tags</label>

        @if (advancedSearch().tagsAllOf) {
          <button type="button" i18n class="reset-button reset-button-small" (click)="resetField('tagsAllOf')">Reset</button>
        }

        <my-select-tags name="tagsAllOf" inputId="tagsAllOf" [(ngModel)]="advancedSearch().tagsAllOf"></my-select-tags>
      </div>

      <div class="form-group">
        <label i18n for="tagsOneOf">One of these tags</label>

        @if (advancedSearch().tagsOneOf) {
          <button type="button" i18n class="reset-button reset-button-small" (click)="resetField('tagsOneOf')">Reset</button>
        }

        <my-select-tags name="tagsOneOf" inputId="tagsOneOf" [(ngModel)]="advancedSearch().tagsOneOf"></my-select-tags>
      </div>

      <div class="form-group">
        <label i18n for="host">PeerTube instance host</label>

        <input
          (change)="onDurationOrPublishedUpdated()"
          (keydown.enter)="$event.preventDefault()"
          type="text"
          id="host"
          name="host"
          placeholder="example.com"
          [(ngModel)]="advancedSearch().host"
          class="form-control"
        >
      </div>

      <div class="form-group" role="radiogroup">
        <div class="radio-label label-container">
          <label for="resultType" i18n>Result types</label>

          @if (advancedSearch().resultType !== undefined) {
            <button type="button" i18n class="reset-button reset-button-small" (click)="resetField('resultType')">Reset</button>
          }
        </div>

        <div class="peertube-radio-container">
          <input type="radio" name="resultType" id="resultTypeVideos" value="videos" [(ngModel)]="advancedSearch().resultType">
          <label i18n for="resultTypeVideos" class="radio">Videos</label>
        </div>

        <div class="peertube-radio-container">
          <input type="radio" name="resultType" id="resultTypeChannels" value="channels" [(ngModel)]="advancedSearch().resultType">
          <label i18n for="resultTypeChannels" class="radio">Channels</label>
        </div>

        <div class="peertube-radio-container">
          <input type="radio" name="resultType" id="resultTypePlaylists" value="playlists" [(ngModel)]="advancedSearch().resultType">
          <label i18n for="resultTypePlaylists" class="radio">Playlists</label>
        </div>
      </div>

      @if (isSearchTargetEnabled()) {
        <div class="form-group" role="radiogroup">
          <div class="radio-label label-container">
            <label for="searchTarget" i18n>Search target</label>
          </div>

          <div class="peertube-radio-container">
            <input type="radio" name="searchTarget" id="searchTargetLocal" value="local" [(ngModel)]="advancedSearch().searchTarget">
            <label i18n for="searchTargetLocal" class="radio">Instance</label>
          </div>

          <div class="peertube-radio-container">
            <input type="radio" name="searchTarget" id="searchTargetSearchIndex" value="search-index" [(ngModel)]="advancedSearch().searchTarget">
            <label i18n for="searchTargetSearchIndex" class="radio">Vidiverse</label>
          </div>
        </div>
      }
    </div>
  </div>

  <div class="submit-button">
    @if (advancedSearch().size()) {
      <button type="button" i18n class="reset-button me-3" (click)="reset()">Reset</button>
    }

    <input
      class="peertube-button primary-button"
      type="submit"
      i18n-value
      value="Filter"
      i18n-ariaLabel
      aria-label="Filter the results and automatically close the filters panel"
    >
  </div>
</form>
