<div class="margin-content">
  <div i18n class="title-page title-page-single">
    Reset my password
  </div>

  <ng-container *ngIf="invalidUser || invalidVerifactionString; else validResetLink">
    <div *ngIf="invalidUser">
      Sorry invalid user
    </div>
    <div *ngIf="invalidVerifactionString">
        Sorry invalid verification string
    </div>
  </ng-container>

  <ng-template #validResetLink>
    <form *ngIf="!isLoading" role="form" (ngSubmit)="resetPassword()" [formGroup]="form">
      <div class="form-group">
        <label i18n for="password">Password</label>
        <input
          type="password" name="password" id="password" i18n-placeholder placeholder="Password" required
          formControlName="password" [ngClass]="{ 'input-error': formErrors['password'] }"
        >
        <div *ngIf="formErrors.password" class="form-error">
          {{ formErrors.password }}
        </div>
      </div>

      <div class="form-group">
        <label i18n for="password-confirm">Confirm password</label>
        <input
          type="password" name="password-confirm" id="password-confirm" i18n-placeholder placeholder="Confirmed password" required
          formControlName="password-confirm" [ngClass]="{ 'input-error': formErrors['password-confirm'] }"
        >
        <div *ngIf="formErrors['password-confirm']" class="form-error">
          {{ formErrors['password-confirm'] }}
        </div>
      </div>

      <input type="submit" i18n-value value="Reset my password" [disabled]="!form.valid || !isConfirmedPasswordValid()">
    </form>
  </ng-template>
</div>
